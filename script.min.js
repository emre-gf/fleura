function initPreloader(){const e=document.getElementById("preloader");window.innerWidth;"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{animateHero()},100)}):setTimeout(()=>{animateHero()},100),window.addEventListener("load",()=>{requestAnimationFrame(()=>{e.classList.add("hidden"),document.body.classList.remove("no-scroll"),animateHero()})}),document.body.classList.add("no-scroll")}function animateHero(){const e=document.querySelectorAll(".hero-animate");0!==e.length&&(e.forEach(e=>{const t=e.getAttribute("data-animate-direction")||"up";switch(e.style.opacity="0",t){case"left":e.style.transform="translateX(-80px) translateY(20px)";break;case"right":e.style.transform="translateX(80px) translateY(20px)";break;case"zoom":e.style.transform="scale(0.5)";break;default:e.style.transform="translateY(40px)"}const n=e.classList.contains("title-line"),o=e.classList.contains("btn"),i=n?"1s":o?"0.6s":"0.9s",r=n?"cubic-bezier(0.34, 1.56, 0.64, 1)":"cubic-bezier(0.4, 0, 0.2, 1)";e.style.transition=`opacity ${i} ${r}, transform ${i} ${r}`}),e.forEach(e=>{const t=1e3*parseFloat(e.getAttribute("data-animate-delay")||"0"),n=e.classList.contains("btn");setTimeout(()=>{e.offsetHeight,requestAnimationFrame(()=>{e.style.opacity="1";const t=e.getAttribute("data-animate-direction")||"up";e.style.transform="zoom"===t?"scale(1)":"translateX(0) translateY(0)"})},n&&t>800?800:t)}))}function initNavbar(){const e=document.getElementById("navbar");let t=!1;function n(){window.scrollY>50?e.classList.add("scrolled"):e.classList.remove("scrolled"),t=!1}window.addEventListener("scroll",()=>{t||(requestAnimationFrame(n),t=!0)},{passive:!0})}function initMobileMenu(){const e=document.getElementById("mobileToggle"),t=document.getElementById("mobileMenu"),n=t.querySelectorAll("a");function o(){const n=e.classList.toggle("active");t.classList.toggle("active"),document.body.classList.toggle("no-scroll"),e.setAttribute("aria-expanded",n)}e.addEventListener("click",o),n.forEach(n=>{n.addEventListener("click",()=>{e.classList.remove("active"),t.classList.remove("active"),document.body.classList.remove("no-scroll"),e.setAttribute("aria-expanded","false")})}),document.addEventListener("keydown",e=>{"Escape"===e.key&&t.classList.contains("active")&&o()})}function initAOS(){if("undefined"!=typeof AOS){window.innerWidth<=768&&setTimeout(()=>{AOS.refresh()},200)}else console.warn("AOS library not loaded")}function initSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",t=>{const n=e.getAttribute("href");if("#"===n||"#main"===n)return void("#main"===n&&(t.preventDefault(),document.getElementById("main").scrollIntoView({behavior:"smooth"})));const o=document.querySelector(n);if(o){t.preventDefault();const e=document.getElementById("navbar").offsetHeight;if("#randevu-al"===n){const t=document.getElementById("appointmentBooking");if(t){const n=t.getBoundingClientRect().top+window.scrollY-e-40;window.scrollTo({top:n,behavior:"smooth"})}else{const t=o.getBoundingClientRect().top+window.scrollY-e-20;window.scrollTo({top:t,behavior:"smooth"})}}else{const t=o.getBoundingClientRect().top+window.scrollY-e-20;window.scrollTo({top:t,behavior:"smooth"})}history.pushState(null,"",n)}})})}function initFAQ(){const e=document.querySelectorAll(".faq-item");e.forEach(t=>{const n=t.querySelector("summary");n.addEventListener("click",n=>{n.preventDefault(),e.forEach(e=>{e!==t&&e.hasAttribute("open")&&e.removeAttribute("open")}),t.hasAttribute("open")?t.removeAttribute("open"):t.setAttribute("open","")}),n.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),n.click())})})}function initContactForm(){const e=document.getElementById("contactForm");if(!e)return;e.addEventListener("submit",t=>{t.preventDefault();const n=new FormData(e),o=Object.fromEntries(n);if(!validateForm(o))return;const i=e.querySelector('button[type="submit"]'),r=i.querySelector(".btn-text"),a=i.querySelector(".btn-loader"),s=r?r.textContent:"Gönder";r&&(r.textContent="Gönderiliyor..."),a&&(a.style.display="inline-block"),i.disabled=!0;const l={"kalici-oje":"Kalıcı Oje","manikur-pedikur":"Manikür & Pedikür","protez-tirnak":"Protez Tırnak","tirnak-bakimi":"Tırnak Bakımı & Onarım","nail-art":"Nail Art & Özel Tasarım",diger:"Diğer / Bilgi Almak İstiyorum"}[o.service]||o.service,c=`mailto:zeynepeke16@gmail.com?subject=${encodeURIComponent(`Yeni Randevu Talebi - ${o.name}`)}&body=${encodeURIComponent(`Yeni Randevu Talebi\n\nAd Soyad: ${o.name}\nTelefon: ${o.phone}\nHizmet: ${l}\n`+(o.message?`Mesaj: ${o.message}\n`:"")+"\n---\nBu mesaj Fleura Nails web sitesinden gönderilmiştir.")}`;window.location.href=c,setTimeout(()=>{showFormSuccess(),e.reset(),r&&(r.textContent=s),a&&(a.style.display="none"),i.disabled=!1},500)});e.querySelectorAll("input, select, textarea").forEach(e=>{e.addEventListener("blur",()=>{validateField(e)}),e.addEventListener("input",()=>{clearFieldError(e)})});const t=document.getElementById("phone");t&&t.addEventListener("input",e=>{let t=e.target.value.replace(/\D/g,"");t.length>11&&(t=t.slice(0,11)),t.length>0&&(t.length<=4?e.target.value=t:t.length<=7?e.target.value=`${t.slice(0,4)} ${t.slice(4)}`:t.length<=9?e.target.value=`${t.slice(0,4)} ${t.slice(4,7)} ${t.slice(7)}`:e.target.value=`${t.slice(0,4)} ${t.slice(4,7)} ${t.slice(7,9)} ${t.slice(9)}`)})}function validateForm(e){let t=!0;return(!e.name||e.name.trim().length<2)&&(showFieldError("name","Lütfen geçerli bir isim girin"),t=!1),e.phone&&isValidPhone(e.phone)||(showFieldError("phone","Lütfen geçerli bir telefon numarası girin"),t=!1),e.service||(showFieldError("service","Lütfen bir hizmet seçin"),t=!1),t}function validateField(e){const{name:t,value:n}=e;switch(t){case"name":if(n.trim().length<2)return showFieldError(t,"Lütfen geçerli bir isim girin"),!1;break;case"phone":if(!isValidPhone(n))return showFieldError(t,"Lütfen geçerli bir telefon numarası girin"),!1;break;case"service":if(!n)return showFieldError(t,"Lütfen bir hizmet seçin"),!1}return clearFieldError(e),!0}function isValidPhone(e){const t=e.replace(/\D/g,"");return t.length>=10&&t.length<=11}function showFieldError(e,t){const n=document.getElementById(e);if(!n)return;clearFieldError(n),n.style.borderColor="#e74c3c",n.setAttribute("aria-invalid","true");const o=document.createElement("span");o.className="field-error",o.id=`${e}-error`,o.setAttribute("role","alert"),o.textContent=t,o.style.cssText="\n        display: block;\n        color: #e74c3c;\n        font-size: 0.8rem;\n        margin-top: 4px;\n    ",n.setAttribute("aria-describedby",o.id),n.parentNode.appendChild(o)}function clearFieldError(e){e.style.borderColor="",e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby");const t=e.parentNode.querySelector(".field-error");t&&t.remove()}function showFormSuccess(){const e=document.getElementById("contactForm").parentElement,t=document.createElement("div");if(t.className="form-success",t.setAttribute("role","alert"),t.setAttribute("aria-live","polite"),t.innerHTML='\n        <div style="text-align: center; padding: 2rem;">\n            <div style="font-size: 4rem; margin-bottom: 1rem; color: #25D366;">✓</div>\n            <h3 style="font-family: \'Cormorant Garamond\', serif; font-size: 1.5rem; margin-bottom: 0.5rem; color: #1a1614;">Teşekkürler!</h3>\n            <p style="color: #6b6360; margin-bottom: 1rem;">Talebiniz başarıyla alındı.</p>\n            <p style="color: #6b6360; font-size: 0.9rem;">En kısa sürede sizinle iletişime geçeceğiz.</p>\n        </div>\n    ',t.style.cssText="\n        position: absolute;\n        inset: 0;\n        background: white;\n        border-radius: 24px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        animation: fadeIn 0.5s ease;\n        z-index: 10;\n    ",!document.getElementById("form-success-animation")){const e=document.createElement("style");e.id="form-success-animation",e.textContent="\n            @keyframes fadeIn {\n                from { opacity: 0; transform: scale(0.9); }\n                to { opacity: 1; transform: scale(1); }\n            }\n        ",document.head.appendChild(e)}e.style.position="relative",e.appendChild(t),setTimeout(()=>{t.style.opacity="0",t.style.transition="opacity 0.5s ease",setTimeout(()=>t.remove(),500)},5e3)}function initLazyLoad(){const e=document.querySelectorAll("img[data-src]");if(0!==e.length)if("IntersectionObserver"in window){const t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const n=e.target;n.src=n.dataset.src,n.removeAttribute("data-src"),n.classList.add("loaded"),t.unobserve(n)}})},{rootMargin:"50px 0px"});e.forEach(e=>t.observe(e))}else e.forEach(e=>{e.src=e.dataset.src,e.removeAttribute("data-src")})}function initServiceCards(){document.querySelectorAll(".service-card").forEach(e=>{e.addEventListener("mouseenter",function(){window.matchMedia("(prefers-reduced-motion: reduce)").matches||(this.style.transform="translateY(-8px)")}),e.addEventListener("mouseleave",function(){this.style.transform=""})})}function initGallery(){document.querySelectorAll(".gallery-item").forEach(e=>{e.addEventListener("mouseenter",function(){const e=this.querySelector(".gallery-placeholder");e&&!window.matchMedia("(prefers-reduced-motion: reduce)").matches&&(e.style.transform="scale(1.05)")}),e.addEventListener("mouseleave",function(){const e=this.querySelector(".gallery-placeholder");e&&(e.style.transform="")})})}function initCountUp(){const e=document.querySelectorAll(".stat-number");if(0===e.length)return;const t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const n=e.target,o=n.textContent.match(/^([\d.]+)(.*)$/);if(o){const e=parseFloat(o[1]),t=o[2];isNaN(e)||(n.textContent="0"+t,window.matchMedia("(prefers-reduced-motion: reduce)").matches?n.textContent=e+t:((e,t,n="")=>{let o=0;const i=t/60,r=setInterval(()=>{o+=i,o>=t?(e.textContent=t+n,clearInterval(r)):e.textContent=Math.floor(o)+n},2e3/60)})(n,e,t))}t.unobserve(n)}})},{threshold:.5});e.forEach(e=>t.observe(e))}function updateActiveNavLink(){const e=document.querySelectorAll("section[id]"),t=document.querySelectorAll(".nav-links a");let n="";e.forEach(e=>{const t=e.offsetTop-150,o=e.offsetHeight;window.scrollY>=t&&window.scrollY<t+o&&(n=e.getAttribute("id"))}),t.forEach(e=>{e.classList.remove("active");e.getAttribute("href")===`#${n}`&&e.classList.add("active")})}function throttle(e,t){let n;return function(...o){n||(e.apply(this,o),n=!0,setTimeout(()=>n=!1,t))}}function initScrollToTop(){const e=document.getElementById("scrollTopBtn");if(!e)return;let t=0;function n(){const n=window.scrollY;n>400?e.classList.add("visible"):e.classList.remove("visible"),t=n}const o=throttle(n,100);window.addEventListener("scroll",o,{passive:!0}),e.addEventListener("click",()=>{e.style.transform="translateY(0) scale(0.9)",window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{e.style.transform=""},200)}),n()}function initHeroHoverVideo(){const e=document.querySelector(".hero-image-container"),t=document.querySelector(".hero-auto-video"),n=document.querySelector(".hero-image");e&&t&&n&&window.addEventListener("load",()=>{setTimeout(()=>{t.load(),t.play().then(()=>{e.classList.add("video-active")}).catch(()=>{console.warn("Video autoplay failed")})},2e3)})}function initAppointmentBooking(){if(!document.getElementById("appointmentBooking"))return;const e=document.getElementById("calendarDays"),t=document.getElementById("calendarMonthYear"),n=document.getElementById("prevMonthBtn"),o=document.getElementById("nextMonthBtn"),i=document.getElementById("dateNextBtn"),r=document.getElementById("timeSlots"),a=document.getElementById("timeNextBtn"),s=document.getElementById("timeBackBtn"),l=document.getElementById("summaryBackBtn"),c=document.getElementById("confirmAppointmentBtn"),d=document.getElementById("summaryDate"),m=document.getElementById("summaryTime");let u="",f="",y=new Date,p=y.getMonth(),v=y.getFullYear();const g=["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"];function h(){e.innerHTML="",t.textContent=`${g[p]} ${v}`;const n=new Date(v,p,1),o=new Date(v,p+1,0).getDate(),r=0===n.getDay()?6:n.getDay()-1,a=new Date,s=p===a.getMonth()&&v===a.getFullYear();for(let t=0;t<r;t++){const t=document.createElement("div");t.className="calendar-day empty",e.appendChild(t)}for(let t=1;t<=o;t++){const n=document.createElement("button");n.type="button",n.className="calendar-day",n.textContent=t;const o=new Date(v,p,t),r=o<a&&!(o.getDate()===a.getDate()&&o.getMonth()===a.getMonth()&&o.getFullYear()===a.getFullYear()),l=s&&t===a.getDate(),c=`${v}-${String(p+1).padStart(2,"0")}-${String(t).padStart(2,"0")}`;r?(n.classList.add("past"),n.disabled=!0):l&&n.classList.add("today"),n.addEventListener("click",()=>{r||(document.querySelectorAll(".calendar-day").forEach(e=>{e.classList.remove("active")}),n.classList.add("active"),u=c,i.disabled=!1)}),u===c&&n.classList.add("active"),e.appendChild(n)}}function b(e){document.querySelectorAll(".booking-step").forEach(e=>{e.classList.remove("active")});const t=document.querySelector(`.booking-step[data-step="${e}"]`);t&&t.classList.add("active")}h(),n.addEventListener("click",()=>{p--,p<0&&(p=11,v--),h()}),o.addEventListener("click",()=>{p++,p>11&&(p=0,v++),h()}),function(){r.innerHTML="";for(let e=9;e<=21;e++){const t=document.createElement("button");t.type="button",t.className="time-slot",t.textContent=`${String(e).padStart(2,"0")}:00`,t.dataset.time=`${String(e).padStart(2,"0")}:00`,t.addEventListener("click",()=>{document.querySelectorAll(".time-slot").forEach(e=>{e.classList.remove("active")}),t.classList.add("active"),f=t.dataset.time,a.disabled=!1}),r.appendChild(t)}}(),i.addEventListener("click",e=>{e.preventDefault(),u?(console.log("Moving to step 2, selectedDate:",u),b(2),setTimeout(()=>{const e=document.querySelector('.booking-step[data-step="2"]');e&&e.scrollIntoView({behavior:"smooth",block:"nearest"})},100)):alert("Lütfen bir tarih seçin")}),s.addEventListener("click",()=>{b(1)}),a.addEventListener("click",()=>{if(f){const e=new Date(u).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"});d.textContent=e,m.textContent=f,b(3)}}),l.addEventListener("click",()=>{b(2)}),c.addEventListener("click",e=>{e.preventDefault();const t=new Date(u).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}),n=`https://wa.me/905558903511?text=${encodeURIComponent(`Merhaba, randevu almak istiyorum.\n\nTarih: ${t}\nSaat: ${f}\n\nMüsait saatlerinizi öğrenebilir miyim?`)}`;window.open(n,"_blank")})}document.addEventListener("DOMContentLoaded",()=>{initPreloader(),initNavbar(),initMobileMenu(),initAOS(),initSmoothScroll(),initContactForm(),initFAQ(),initLazyLoad(),initServiceCards(),initGallery(),initCountUp(),initScrollToTop(),initHeroHoverVideo(),initAppointmentBooking()}),window.addEventListener("load",()=>{setTimeout(()=>{const e=document.querySelector(".whatsapp-float");e&&(e.style.opacity="0",e.style.transform="scale(0.8)",setTimeout(()=>{e.style.transition="opacity 0.5s ease, transform 0.5s ease",e.style.opacity="1",e.style.transform="scale(1)"},1500))},0)}),window.addEventListener("scroll",()=>{requestAnimationFrame(updateActiveNavLink)}),document.addEventListener("keydown",e=>{if("Tab"===e.key){const t=document.getElementById("mobileMenu");if(t&&t.classList.contains("active")){const n=t.querySelectorAll("a, button"),o=n[0],i=n[n.length-1];e.shiftKey&&document.activeElement===o?(e.preventDefault(),i.focus()):e.shiftKey||document.activeElement!==i||(e.preventDefault(),o.focus())}}}),console.log("%c✿ Fleura Nails","font-size: 24px; font-weight: bold; color: #c4a484;"),console.log("%cElleriniz için sanat eseri","font-size: 14px; color: #6b6360;"),console.log("%cTüm İzmir Bölgesine VIP Ev Hizmeti","font-size: 12px; color: #999;");